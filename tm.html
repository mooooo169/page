<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" />
    <title>ุบุฒูุฉ ุงูุฎูุฏู - ุฎุฑูุทุฉ ุชูุงุนููุฉ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f4f4f4;
            direction: rtl;
            min-height: 100vh;
        }

        .tour-btn, .map-btn, .download-btn {
            position: fixed;
            z-index: 9999;
            background-color: #e67e22;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .tour-btn:hover, .map-btn:hover, .download-btn:hover {
            background-color: #d35400;
            transform: scale(1.05);
        }

        .tour-btn { top: 20px; left: 20px; }
        .map-btn { top: 80px; left: 20px; }
        .download-btn { top: 140px; left: 20px; }

        canvas {
            display: block;
            margin: 20px auto;
            background: #ecf0f1;
            border: 2px solid #ccc;
        }

        /* ุชุญุฑูู ุงูุฎุฑูุทุฉ ููููุงู ูููููู ูุฑุคูุฉ ุงูุฌุจู ุงูุบุฑุจู ูุงููุงู */
        #map-container {
            text-align: center;
            margin-right: -100px;
        }

        /* ุฃูููุดู ุฏุฎูู ุงูุนูุงุตุฑ */
        .fade-in {
            opacity: 0;
            animation: fadeIn 1s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 10000;
            display: none;
        }

        .popup h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .popup p {
            font-size: 14px;
            color: #555;
        }

        .popup .close-btn {
            margin-top: 15px;
            text-align: center;
        }

        .popup .close-btn button {
            background-color: #e67e22;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        section {
            padding: 60px 20px;
            text-align: center;
            background-color: #fff;
            border-bottom: 1px solid #ddd;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease;
        }

        section.active {
            opacity: 1;
            transform: translateY(0);
        }

        section h2 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        section p {
            max-width: 600px;
            margin: auto;
            font-size: 18px;
            color: #555;
        }
    </style>
</head>
<body>

    <!-- ุฃุฒุฑุงุฑ -->
    <button class="tour-btn" onclick="startTour()">ุงุจุฏุฃ ุงูุฌููุฉ</button>
    <button class="map-btn" onclick="toggleMap()">ุนุฑุถ ุงูุฎุฑูุทุฉ</button>
    <button class="download-btn" onclick="downloadMap()">ุชูุฒูู ุงูุฎุฑูุทุฉ (PNG)</button>

    <!-- Canvas ุงูุฎุฑูุทุฉ -->
    <div id="map-container" style="display:none;" class="fade-in">
        <h2 style="margin-top: 20px;">ุฎุฑูุทุฉ ุบุฒูุฉ ุงูุฎูุฏู</h2>
        <canvas id="battleMap" width="1000" height="700"></canvas>
    </div>

    <!-- ูุงูุฐุฉ Popup ูููุนูููุงุช -->
    <div class="popup" id="infoPopup">
        <h3 id="popupTitle">ุงูุนูุตุฑ</h3>
        <p id="popupText">ุชูุงุตูู ุนู ุงูุนูุตุฑ...</p>
        <div class="close-btn">
            <button onclick="document.getElementById('infoPopup').style.display = 'none'">ุฅุบูุงู</button>
        </div>
    </div>

    <!-- ุฃูุณุงู ุงูุฌููุฉ -->
    <section id="intro"><h2>ูุฑุญุจูุง ุจุฌููุชู!</h2><p>ูู ูุฐุง ุงูุชูุซูู ุงูุจุตุฑู ูุบุฒูุฉ ุงูุฎูุฏูุ ุณุชุชุนุฑู ุนูู ูููุน ุงููุณุฌุฏ ุงููุจูู ูุงููุฏููุฉ ุงููููุฑุฉ ูุงูุฌุจุงู ุงูุชู ูุงูุช ุชุญุฏูุง ูู ุซูุงุซ ุฌูุงุชุ ุจูููุง ูุงู ุงูุฎูุฏู ูุญูู ุงูุฌูุฉ ุงูุฑุงุจุนุฉ ูู ุฌูุด ุงููุดุฑููู.</p></section>
    <section id="mountains"><h2>ุงูุฌุจุงู ุงููุญูุทุฉ</h2><p>ูุงูุช ุงููุฏููุฉ ุงููููุฑุฉ ูุญุงุทุฉ ุจุงูุฌุจุงู ูู ุงูุฌูุงุช ุงูุดุฑููุฉ ูุงูุบุฑุจูุฉ ูุงูุฌููุจูุฉุ ููุง ุณุงุนุฏ ูู ุญูุงูุชูุง ุจุดูู ุทุจูุนูุ ููุงู ุงูุฎูุฏู ูู ุงูุญุตู ุงููุญูุฏ ุงูุฐู ุชู ุญูุฑู ูู ุงูุฌูุฉ ุงูุดูุงููุฉ.</p></section>
    <section id="mosque"><h2>ุงููุณุฌุฏ ุงููุจูู</h2><p>ูุงู ุงููุณุฌุฏ ุงููุจูู ูุฑูุฒ ุงููุฑุงุฑ ุฎูุงู ุงูุบุฒูุฉุ ุญูุซ ุงุฌุชูุน ุงููุณูููู ููู ูุงุณุชุดุงุฑูุง ุงููุจู ูุญูุฏ ๏ทบ ุญูู ููููุฉ ููุงุฌูุฉ ุฌูุด ุงููุดุฑููู.</p></section>
    <section id="trench"><h2>ุญูุฑ ุงูุฎูุฏู</h2><p>ุงูุชุฑุญ ุณููุงู ุงููุงุฑุณู ููุฑุฉ ุญูุฑ ุงูุฎูุฏู ูู ุงูุฌูุฉ ุงูุดูุงููุฉ ูููุฏููุฉุ ููู ูุง ูู ููู ูุนุฑูููุง ุนูุฏ ุงูุนุฑุจ ุขูุฐุงูุ ููุฏ ุณุงุนุฏ ูุฐุง ุงูุฎูุฏู ูู ุตุฏ ูุฌูุงุช ุงููุดุฑููู.</p></section>
    <section id="enemy"><h2>ุฌูุด ุงููุดุฑููู</h2><p>ุฌุงุก ุฌูุด ุงููุดุฑููู ุจูุง ููุงุฑุจ ุงูุนุดุฑุฉ ุขูุงู ููุงุชูุ ููู ุงูุฎูุฏู ุญุงู ุฏูู ุฏุฎูููู ุงููุฏููุฉุ ูุจุนุฏ ุฃูุงู ูู ุงูุญุตุงุฑุ ุฃุฑุณู ุงููู ุฑูุญุงู ุดุฏูุฏุฉ ูุดุชุช ููุฏูู ููุฒููู.</p></section>

    <script>
        const canvas = document.getElementById('battleMap');
        const ctx = canvas.getContext('2d');

        // ุนูุงุตุฑ ุงูุฎุฑูุทุฉ
        const elements = [
            // ุงููุฏููุฉ ุงููููุฑุฉ
            { name: "ุงููุฏููุฉ ุงููููุฑุฉ", x: 250, y: 200, width: 500, height: 300, color: '#bdc3c7', info: "ุงููุฏููุฉ ุงููููุฑุฉ ูู ุงููุฏููุฉ ุงูุชู ูุงุฌุฑ ุฅูููุง ุงููุจู ูุญูุฏ ๏ทบ ุจุนุฏ ุฃู ุงุนุชุตู ุงููุณูููู ูููุงุ ููุงูุช ูุฑูุฒ ุงูุฏููุฉ ุงูุฅุณูุงููุฉ ูู ุฐูู ุงูููุช." },

            // ุงููุณุฌุฏ ุงููุจูู (ุฏุงุฎู ุงููุฏููุฉ)
            { name: "ุงููุณุฌุฏ ุงููุจูู", x: 350, y: 250, width: 300, height: 200, color: '#f1c40f', info: "ูุงู ุงููุณุฌุฏ ุงููุจูู ูุฑูุฒ ุงููุฑุงุฑ ุฎูุงู ุงูุบุฒูุฉุ ุญูุซ ุงุฌุชูุน ุงููุณูููู ููู ูุงุณุชุดุงุฑูุง ุงููุจู ูุญูุฏ ๏ทบ ุญูู ููููุฉ ููุงุฌูุฉ ุฌูุด ุงููุดุฑููู." },

            // ุงูุฌุจู ุงูุฌููุจู (ุฌุจู ุนูุฑ - ุจููุณ ุทูู ุงูุฎูุฏู -1)
            { name: "ุฌุจู ุนูุฑ", x: 250, y: 500, width: 449, height: 100, color: '#333333', info: "ุฌุจู ุนูุฑ ูู ุงูุฌุจู ุงูุฌููุจู ุงูุฐู ูุงู ูุญูู ุงููุฏููุฉ ูู ุงูุฌููุจุ ููุนุชุจุฑ ุฃุญุฏ ุงูุฌุจุงู ุงูุทุจูุนูุฉ ุงูุชู ุณุงุนุฏุช ูู ุญูุงูุฉ ุงููุฏููุฉ." },

            // ุงูุฌุจู ุงูุดุฑูู
            { name: "ุญุฑุฉ ุฌุจู ูุงูู", x: 700, y: 100, width: 100, height: 400, color: '#444444', info: "ุญุฑุฉ ุฌุจู ูุงูู ูู ุงูุฌุจู ุงูุดุฑูู ุงูุฐู ูุงู ูุญูู ุงููุฏููุฉ ูู ุงูุฌูุฉ ุงูุดุฑููุฉุ ููุงูุช ุงูููุทูุฉ ููุชุฏุฉ ูุญู ุงูุฌููุจ ูุชุตูุฉ ุจุฌุจู ุนูุฑ." },

            // ุงูุฌุจู ุงูุบุฑุจู
            { name: "ุญุฑุฉ ุฌุจู ูุจุฑุฉ", x: 150, y: 100, width: 100, height: 400, color: '#444444', info: "ุญุฑุฉ ุฌุจู ูุจุฑุฉ ูู ุงูุฌุจู ุงูุบุฑุจู ุงูุฐู ูุงู ูุญูู ุงููุฏููุฉ ูู ุงูุฌูุฉ ุงูุบุฑุจูุฉุ ูุชูุน ูุฐู ุงูููุทูุฉ ูุฑุจ ุงููุฏููุฉ ุงููููุฑุฉ." },

            // ุงูุฎูุฏู
            { name: "ุงูุฎูุฏู", x: 250, y: 130, width: 450, height: 15, color: '#8B4513', info: "ุงูุฎูุฏู ูู ุงูุญูุฑุฉ ุงูุชู ุฃูุฑ ุงููุจู ๏ทบ ุงููุณูููู ุจุญูุฑูุง ูู ุงูุฌูุฉ ุงูุดูุงููุฉ ูู ุงููุฏููุฉุ ุจูุงุกู ุนูู ูุดูุฑุฉ ุณููุงู ุงููุงุฑุณูุ ูุตุฏ ุฌูุด ุงููุดุฑููู." },

            // ุฌูุด ุงููุดุฑููู
            { name: "ุฌูุด ุงููุดุฑููู - 10 ุขูุงู", x: 250, y: 50, width: 450, height: 50, color: '#e74c3c', info: "ุฌุงุก ุฌูุด ุงููุดุฑููู ุจูุง ููุงุฑุจ ุงูุนุดุฑุฉ ุขูุงู ููุงุชูุ ููู ุงูุฎูุฏู ุญุงู ุฏูู ุฏุฎูููู ุงููุฏููุฉุ ูุจุนุฏ ุฃูุงู ูู ุงูุญุตุงุฑุ ุฃุฑุณู ุงููู ุฑูุญุงู ุดุฏูุฏุฉ ูุดุชุช ููุฏูู ููุฒููู." },
        ];

        function drawMap() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            elements.forEach(el => {
                ctx.fillStyle = el.color;
                ctx.fillRect(el.x, el.y, el.width, el.height);

                // ุฑุณู ุงูุงุณู ูู ุงููุณุท ุฃู ูุฎุตุต
                ctx.fillStyle = "#ffffff";
                ctx.font = "14px Arial";

                const textWidth = ctx.measureText(el.name).width;
                const centerX = el.x + (el.width - textWidth) / 2;
                const centerY = el.y + (el.height + 14) / 2;

                if (el.name === "ุงููุณุฌุฏ ุงููุจูู") {
                    ctx.fillText(el.name, el.x + 80, el.y + 25);
                    ctx.fillStyle = "#000";
                    ctx.font = "16px Arial";
                    ctx.fillText("๐", el.x + 130, el.y + 110);
                } else {
                    ctx.fillText(el.name, centerX, centerY);
                }
            });
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            for (let el of elements) {
                if (
                    mouseX >= el.x &&
                    mouseX <= el.x + el.width &&
                    mouseY >= el.y &&
                    mouseY <= el.y + el.height
                ) {
                    showPopup(el.name, el.info);
                    break;
                }
            }
        });

        function showPopup(title, text) {
            document.getElementById('popupTitle').innerText = title;
            document.getElementById('popupText').innerText = text;
            document.getElementById('infoPopup').style.display = 'block';
        }

        function toggleMap() {
            const container = document.getElementById('map-container');
            container.style.display = container.style.display === 'none' ? 'block' : 'none';

            setTimeout(() => {
                drawMap();
            }, 500);
        }

        function downloadMap() {
            const link = document.createElement('a');
            link.download = 'ุฎุฑูุทุฉ_ุบุฒูุฉ_ุงูุฎูุฏู.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        const sections = document.querySelectorAll("section");
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("active");
                }
            });
        }, { threshold: 0.3 });

        sections.forEach(section => observer.observe(section));

        function startTour() {
            const targets = ['#intro', '#mountains', '#mosque', '#trench', '#enemy'];
            let i = 0;

            function scrollToNext() {
                if (i < targets.length) {
                    document.querySelector(targets[i]).scrollIntoView({ behavior: 'smooth' });
                    i++;
                    setTimeout(scrollToNext, 3000);
                }
            }

            scrollToNext();
        }
    </script>

</body>
</html>